(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-515d3452"],{"5ee9":function(e,t,r){"use strict";var o=r("c487"),i=r.n(o);i.a},"663e":function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return l})),r.d(t,"a",(function(){return n}));var o=r("b775");function i(e){return Object(o["a"])({url:"electronic/workOrder/startWorkOrder",method:"post",data:e})}function a(e){return Object(o["a"])({url:"electronic/workOrder/queryWorkOrder",method:"post",data:e})}function s(e){return Object(o["a"])({url:"electronic/workOrder/queryWorkOrderToMe",method:"post",data:e})}function l(e){return Object(o["a"])({url:"electronic/workOrder/queryWorkOrderDetail",method:"post",data:e})}function n(e){return Object(o["a"])({url:"electronic/workOrder/approveWorkOrder",method:"post",data:e})}},"6e5c":function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"填写信息",name:"first"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.doc,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"文件名称",prop:"docName"}},[r("el-input",{model:{value:e.doc.docName,callback:function(t){e.$set(e.doc,"docName",t)},expression:"doc.docName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"文件描述",prop:"remark"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.doc.remark,callback:function(t){e.$set(e.doc,"remark",t)},expression:"doc.remark"}})],1),e._v(" "),r("el-form-item",[r("el-upload",{staticClass:"upload-demo",attrs:{drag:"",action:"http://localhost:8088/electronic/file/uploadFile","on-success":e.handleAvatarSuccess,"file-list":e.fileList,multiple:""}},[r("i",{staticClass:"el-icon-upload"}),e._v(" "),r("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),r("em",[e._v("点击上传")])]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交审批")])],1)],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible,title:"提交审批"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"formInline",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.approve,rules:e.rules}},[r("el-form-item",{attrs:{label:"审批人",prop:"approveList"}},[r("el-select",{attrs:{multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择审批人"},model:{value:e.approve.approveList,callback:function(t){e.$set(e.approve,"approveList",t)},expression:"approve.approveList"}},e._l(e.options,(function(e){return r("el-option",{key:e.userId,attrs:{label:e.userName,value:e.userId}})})),1)],1)],1),e._v(" "),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("formInline")}}},[e._v("提交")])],1)],1)],1)},i=[],a=(r("cc57"),r("663e")),s=r("c24f"),l={name:"uploadDoc",data:function(){return{activeName:"first",dialogVisible:!1,formInline:{user:"",region:""},doc:{docName:"",remark:""},rules:{docName:[{required:!0,message:"请输入文件名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 50 个字符",trigger:"blur"}],remark:[{required:!0,message:"请填写文件描述",trigger:"blur"}],approveList:[{required:!0,message:"请选择活动区域",trigger:"change"}]},approve:{approveList:[]},fileList:[],options:[],value:[],pageNum:1,pageSize:1e3}},mounted:function(){},methods:{handleClick:function(){},handleAvatarSuccess:function(e,t){e.success&&this.fileList.push({name:e.result.fileName,url:e.result.fileDownloadUri})},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.dialogVisible=!0,t.queryUserList()}))},submitDoc:function(){for(var e=this,t=[],r=[],o=0;o<this.fileList.length;o++)t.push({docName:this.fileList[o].name,docUrl:this.fileList[o].url});for(var i=0;i<this.approve.approveList.length;i++)r.push({userId:this.approve.approveList[i],nodeOrder:i+1});Object(a["e"])({workOrderName:this.doc.docName,workOrderDesc:this.doc.remark,workInfo:JSON.stringify(t),workType:"doc",workNodeList:JSON.stringify(r)}).then((function(t){t.success&&(e.$message({type:"success",message:"操作成功"}),e.$router.push({path:"/approve/docapprove"}))}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.submitDoc()}))},queryUserList:function(e){var t=this;Object(s["e"])({pageSize:this.pageSize,pageNum:this.pageNum,userName:e}).then((function(e){e.success&&(t.options=e.result.result)}))}}},n=l,c=(r("5ee9"),r("e90a")),u=Object(c["a"])(n,o,i,!1,null,"d4a343f8",null);t["default"]=u.exports},c487:function(e,t,r){}}]);